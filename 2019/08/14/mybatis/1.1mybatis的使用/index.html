

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/gzguo/img/favicon.png">
  <link rel="icon" href="/gzguo/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="mybatis增删改查的实现。开发dao的两种方法（原始dao开发、mapper接口代理开发）、参数配置、映射、动态sql。">
  <meta name="author" content="Little scholar">
  <meta name="keywords" content="IT">
  
  <title>1.1mybatis的使用 - Learing</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/gzguo/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/gzguo/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"github.com","root":"/gzguo/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"gc226JcELJOJ7J0n4C9IDFd1-gzGzoHsz","app_key":"Ix9equHpEbmzuf2eGJmCgvaB","server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/gzguo/js/utils.js" ></script>
  <script  src="/gzguo/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/gzguo/">&nbsp;<strong>Jarvis</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/gzguo/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/gzguo/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/gzguo/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/gzguo/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/gzguo/img/bj.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="1.1mybatis的使用">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-08-14 11:42" pubdate>
        2019年8月14日 中午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.3k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      62
       分钟
    </span>
  

  
  
    
      <!-- LeanCloud 统计文章PV -->
      <span id="leancloud-page-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-page-views"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
    <a href="https://github.com/gzguo/gzguo" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">1.1mybatis的使用</h1>
            
            <div class="markdown-body">
              <p>mybatis增删改查的实现。开发dao的两种方法（原始dao开发、mapper接口代理开发）、参数配置、映射、动态sql。</p>
<span id="more"></span>

<h1 id="对原生态jdbc程序问题的总结">1. 对原生态jdbc程序问题的总结</h1><p>（单独使用jdbc开发）</p>
<p>数据库用的时候连接，不用的时候释放，频繁操作   通过连接池节约资源</p>
<p>sql语句硬编码，不利于系统维护   使用配置文件把他配起来</p>
<h1 id="mybatis框架原理">2. mybatis框架原理</h1><h2 id="特点">2.1. 特点</h2><p>mybatis是持久层框架，是apache下的项目</p>
<p>mybatis让程序主要精力放在sql上，通过mybatis提供的映射方式，简化sql</p>
<p>mybatis将输入参数自动进行输入映射，将查询结果集映射成java对象</p>
<h2 id="mybatis框架">2.2. mybatis框架</h2><p>先完成基本配置：</p>
<p>SqlMapConfig.xml：是mybatis的全局配置文件（名称不固定）。配置了数据源（c3p0）、事务（spring）等mybatis运行环境。配置里有个特别的东西（mapper.xml）这个文件里是映射关系（配置sql语句）通过配置文件生成会话工厂（SqlSessionFactory）</p>
<p>操作数据库：</p>
<p>SqlSessionFactory（会话工厂）创建 -&gt;SqlSession（接口）：会话 作用：操作数据库（发出sql增删改查）内部通过执行器（Excutor接口）操作数据库,两种实现方式（基本执行器、缓存执行器）。</p>
<p>这个执行器需要很多参数，所以mybatis提供了一个<em>底层的封装对象（mapped statement）</em>作用：对数据库存储封装，包括sql语句，输入参数，输出结果类型，终于连接上了数据库</p>
<p>输入参数类型：pojo、java简单类型、hashmap</p>
<p>输出结果类型：pojo、java简单类型、hashmap</p>
<h1 id="mybatis入门程序">3. mybatis入门程序</h1><h2 id="增删改查">3.1. 增删改查</h2><p><em>lib下的一般是依赖包</em></p>
<h3 id="查询用户信息">3.1.1. 查询用户信息</h3><p>根据用户名称模糊查询用户信息</p>
<p><u>首先在映射文件中配置sql语句</u>   映射：（hibernate：orm：对象关系映射，实体类和数据表映射）咱们的xml映射分为输入映射、输出映射</p>
<p>映射文件名 :user.xml(ibatis)、xxxMapper.xml(mybatis)</p>
<p>namespace命名空间，sql的隔离</p>
<p>映射文件中的sql语句会封装到<em>mapped statement</em>对象中</p>
<p>在SqlMapConfig.xml中加载刚刚写好的xxxMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;路径/xxxMapper.xml&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>程序编写，创建会话工厂，连接数据库</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//mybatis配置文件</span><br><br>String resource = <span class="hljs-string">&quot;sqlmap/SqlMapConfig.xml&quot;</span>;<br><br>得到配置文件的流<br><br>Resource.getResourceAsStream(resource);<br><br><span class="hljs-comment">//创建会话工厂传入mybatis的配置文件信息，需要一个配置文件流</span><br><br>SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);<br><br><span class="hljs-comment">//通过工厂得到会话SqlSession</span><br><br>SqlSession sqlSession = sqlSessionFactory.openSession();<br><br><span class="hljs-comment">//通过SqlSession操作数据库</span><br><br><span class="hljs-comment">//第一个参数：映射文件中的statement的id，等于=namespace+&quot;.&quot;+statement的id</span><br><br><span class="hljs-comment">//第二个参数：指定和映射文件中所匹配的parameterType类型的参数</span><br><br>User user = sqlSession.selectOne(statement,parameter);<br><br><span class="hljs-comment">//提交事务</span><br><br>sqlSession.commit();<br><br><span class="hljs-comment">//释放资源</span><br><br>sqlSession.close();<br></code></pre></td></tr></table></figure>



<h4 id="sql语句的格式">3.1.1.1. sql语句的格式</h4><p>id：标识映射文件中的sql</p>
<p>将sql语句封装到mapped statement 对象中，所以id称为statement的id</p>
<p>parameterType：指定输入参数的类型</p>
<p>#{}表示一个占位符号</p>
<p>${}表示一个拼接符号，会引起sql注入（拼接的时候写where 1=1）</p>
<p>#{id}：其中的id表示接入输入的参数，参数名称就是id，如果输入参数是简单类型，#{}中的参数名可以任意，可以实value或其他的名称都行</p>
<p>resultType：指定输出结果的类型，表示将单条记录映射成java对象</p>
<p>selectOne表示查询出1条记录进行映射</p>
<p>selectList表示查询出一个列表（多条记录）进行映射</p>
<h3 id="添加用户">3.1.2. 添加用户</h3><p>parameterType：指定输入参数类型是pojo（包括用户信息）</p>
<p>#{}中指定的pojo的属性名，接收到pojo对象的属性值OGNL获取对象的属性值</p>
<p>sql后面不要加;</p>
<p><strong>自增主键返回</strong>：执行insert提交之前自动生成一个自增主键。通过mysql函数获取到刚插入记录的自增主键（select last_insert_idid();）在inseert之后调用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span> = <span class="hljs-string">&quot;insertUser&quot;</span> <span class="hljs-attr">parameterType</span> = <span class="hljs-string">&quot;cn.itcast.mybatis.po.User&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--keyProperty：将查询到主键值设置到parameterType指定的对象的哪个属性</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">order：select last_insert_id()执行顺序，相对于insert语句来说他的执行顺序</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">resultType:指定select last_insert_id()结果的类型--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">selectKey</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">order</span>=<span class="hljs-string">&quot;after&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br><br>    select last_insert_id();<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">selectKey</span>&gt;</span><br><br>insert into user(username,birthday,sex,address) values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;adress&#125;)<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>非自增主键的返回</strong>：</p>
<p>mysql的uuid()函数生成主键，需要修改id字段类型的为String，长度设置为35位</p>
<p>执行思路：先通过uuid();查询到主键，将主键注入到sql语句中，执行uuid();语句顺序相对于insert语句之前执行</p>
<h3 id="删除用户">3.1.3. 删除用户</h3><p>sqlSession.update(statement,parameter);</p>
<p>sqlSession.delete(statement,parameter);</p>
<p>sqlSession.selectOne/List(statement,parameter);</p>
<p>sqlSession.insert(statement,parameter);</p>
<h3 id="更新用户">3.1.4. 更新用户</h3><h2 id="入门程序的总结">3.2. 入门程序的总结</h2><p>#{}表示一个占位符，接受输入参数，类型可以是简单类型、pojo、hashmap，如果接受简单类型，#{}中可以写成value或其他名称</p>
<p>#{}接受pojo对象值，通过OGNL读取对象的属性值，通过属性.属性.属性…的方式获取属性值</p>
<p>${}表示一个拼接符，会出现sql注入，不建议使用。接受输入参数，类型可以是简单类型、pojo、hashmap，如果接受简单类型，#{}中只能写成value</p>
<p>${}接受pojo对象值，通过OGNL读取对象的属性值，通过属性.属性.属性…的方式获取属性值</p>
<h3 id="mybatis和hibernate本质区别和应用场景">3.2.1. mybatis和hibernate本质区别和应用场景</h3><p><strong>hibernate</strong>：入门门槛较高，是一个标准的ORM框架（对象关系映射），不需要程序员写sql，sql语句自动生成。对sql语句的优化、修改比较困难</p>
<p><strong>应用场景</strong>：适应于需求变化较少的中小型的项目，比如：后台管理系统，erp、orm、oa…</p>
<p><strong>mybatis</strong>：专注于sql本身，需要程序员自己编写sql语句，sql修改、优化比较方便。mybatis是一个不完全的ORM框架，虽然程序员自己写sql，但是存在映射（输入映射、输出映射）</p>
<p><strong>应用场景</strong>：适应于需求项目较多的项目，比如：互联网项目</p>
<p>企业进行技术选型，以低成本、高回报作为技术选型的原则，根据项目组的项目力量进行选择</p>
<h1 id="mybatis开发dao的两种方法">4. mybatis开发dao的两种方法</h1><h2 id="SqlSession使用范围（单例）">4.1. SqlSession使用范围（单例）</h2><p>通过<strong>SqlSessionFactoryBuilder</strong>创建SqlSessionFactory，将SqlSessionFactoryBuilder当成一个工具类即可，不需要使用单例管理SqlSessionFactoryBuilder。在需要创建工厂的时候只需要创建一次SqlSessionFactoryBuilder即可（因为下面的SqlSessionFactory是单例管理的）</p>
<p>通过<strong>SqlSessionFactory</strong>创建SqlSession，通过使用单例模式管理sqlSessionFactory（工厂一旦创建，就一直使用一个实例）</p>
<p>将来mybatis和spring整合后，使用单例模式管理sqlSessionFactory</p>
<p>SqlSession：是一个面向用户（程序员）的接口提供了很多操作数据库的方法：如：selectOne、selectList。是线程不安全的，在SqlSession的实现类中，除了有接口中的方法（操作数据库的方法）、还有数据域的属性（多例不安全）。<em>SqlSession最佳的应用场合在方法体内，定义成局部变量</em></p>
<h2 id="原始dao开发方法">4.2. 原始dao开发方法</h2><h3 id="思路">4.2.1. 思路</h3><p><strong>需要编写dao接口和dao实现类</strong></p>
<p>需要向dao实现类中注入SqlSessionFactory，在方法体中通过SqlSessionFactory常见SqlSession</p>
<h3 id="dao接口">4.2.2. dao接口</h3><h3 id="dao接口实现类">4.2.3. dao接口实现类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//需要向dao实现类中注入SqlSessionFactory</span><br><br>这里通过构造方法注入<br><br><span class="hljs-keyword">private</span> SqlSessionFactory sqlSessionFactory;<br><br><span class="hljs-keyword">public</span> 类名 (SqlSessionFactory sqlSessionFactory)&#123;<br><br><span class="hljs-keyword">this</span>.sqlSessionFactory = sqlSessionFactory;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/images/1565315234136.png" srcset="/gzguo/img/loading.gif" lazyload></p>
<p>@Befor是在测试类之前执行的类：需要创建会话工厂，供测试类通过构造器注入</p>
<p>@Text是测试类：创建UserDao这个实现类的时候，UserDaoImpl构造器需要一个sqlSessionFactory，有@Befor提供；创建成功后可以开始调用UserDao里面的方法</p>
<h3 id="总结原始dao开发的问题">4.2.4. 总结原始dao开发的问题</h3><p>1.dao接口的实现类的方法中存在大量的模板方法，设想能否将这些代码提取出来，大大减轻程序员的工作量</p>
<p>2.第一个参数：看这个蓝色的地方：是个硬编码（statement的id硬编码）</p>
<p>3.第二个参数的类型是泛型，即使传入参数错误，在编译阶段也不报错，不利于程序员开发</p>
<p><img src="/images/1565316318487.png" srcset="/gzguo/img/loading.gif" lazyload></p>
<p>mybatis的mapper代理的开发方法</p>
<p>程序员编写mapper.xml映射文件</p>
<p>程序员编写mapper接口（相当于dao接口）需要遵循一些开发规范，mybatis可以自动生成mapper接口实现类代理对象。</p>
<p>mybatis可以自动生成mapper接口实现类的代理对象</p>
<h3 id="开发规范">4.2.5. 开发规范</h3><p>1.在mapper.xml中namespace等于mapper接口的地址</p>
<p>2.mapper.java接口中的方法名，和mapper.xml中的statement的id一致</p>
<p>3.mapper.java接口中的方法输入参数类型和mapper.xml中statement中的statement的parameterType指定的类型一致</p>
<p>4.mapper.java中的返回值类型和mapper.xml中的statement中的resultType指定的类型一致</p>
<h3 id="总结">4.2.6. 总结</h3><p>以上的开发规范主要是对下边的代码进行统一的生成</p>
<p>namespace变成了mapper.java的路径，mapper.java中的方法名是mapper.xml的staement的id，mybatis会自动拼接这两个东西生成原始Dao开发的第一个参数，第二个参数由第三条和第四条规范实现了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">User user = sqlSession.selectOne(<span class="hljs-string">&quot;namespace+statement的id&quot;</span>,占位符对应的输入参数);<br><br>sqlSession.insert(<span class="hljs-string">&quot;&quot;</span>,);<br><br><span class="hljs-comment">//开启会话，无论是什么开发，都得开启会话</span><br><br>SqlSession sqlSession = sqlSessionFactory.openSession();<br><br><span class="hljs-comment">//创建UserMapper对象,mybatis自动生成mapper代理对象</span><br><br>UserMapper userMapper = sqlSession.getMapper(UserMapper.class);<br><br>调用userMapper的方法<br></code></pre></td></tr></table></figure>

<p>注意：要在SqlMapConfig.xml中加载mapper.xml</p>
<h3 id="问题总结">4.2.7. 问题总结</h3><h4 id="代理对象内部调用selectOne或selectList">4.2.7.1. 代理对象内部调用selectOne或selectList</h4><p>如果mapper方法返回单个pojo对象（非集合对象），代理对象的内部通过selectOne查询数据库</p>
<p>如果mapper方法返回对象集合，代理对象内部通过selectList查询数据库</p>
<h4 id="mapper接口方法的参数个数">4.2.7.2. mapper接口方法的参数个数</h4><p>mapper接口方法的参数个数只能有一个，系统是否不利于系统维护</p>
<p>系统框架中，dao层的代码是被业务层共用的，即使mapper接口只有一个参数，可以使用包装类型的pojo瞒住不同业务方法的参数</p>
<p>注意：持久层中方法的参数可以用包装类型、map等，但是service方法中建议不要使用包装类型（不利于业务层的可扩展性）</p>
<h1 id="Mapper代理开发和dao原始开发总结">5. Mapper代理开发和dao原始开发总结</h1><h2 id="原始开发：">5.1. 原始开发：</h2><p>映射文件中的sql语句会封装到<em>mapped statement</em>对象中</p>
<p>在SqlMapConfig.xml中加载刚刚写好的xxxMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>   <br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;路径/xxxMapper.xml&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>程序编写，创建会话工厂，连接数据库</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//mybatis配置文件</span><br><br>String resource = <span class="hljs-string">&quot;sqlmap/SqlMapConfig.xml&quot;</span>;<br><br>得到配置文件的流<br><br>Resource.getResourceAsStream(resource);<br><br><span class="hljs-comment">//创建会话工厂传入mybatis的配置文件信息，需要一个配置文件流</span><br><br>SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);<br><br><span class="hljs-comment">//通过工厂得到会话SqlSession，这个不论是怎么开发都必须有的</span><br><br>SqlSession sqlSession = sqlSessionFactory.openSession();<br><br><span class="hljs-comment">//通过SqlSession操作数据库</span><br><br><span class="hljs-comment">//第一个参数：映射文件中的statement的id，等于=namespace+&quot;.&quot;+statement的id</span><br><br><span class="hljs-comment">//第二个参数：指定和映射文件中所匹配的parameterType类型的参数这里有缺陷</span><br><br>User user = sqlSession.selectOne(statement,parameter);<br><br><span class="hljs-comment">//提交事务</span><br><br>sqlSession.commit();<br><br><span class="hljs-comment">//释放资源</span><br><br>sqlSession.close();<br></code></pre></td></tr></table></figure>

<p>自己配置SqlMapConfig.xml 和 mapper.xml</p>
<p>通过配置文件生成会话工厂（SqlSessionFactory）</p>
<p>通过会话工厂生成会话（SqlSession） </p>
<p>通过SqlSession操作数据库</p>
<p><strong>开发的流程：</strong></p>
<p>编写写sql的xml，在mybatis全局配置的xml中加载编写sql的xml</p>
<p><em>编写sql的xml里的namespace对应mapper.java的类的全路径，里面的sql的id对应类中的方法名（原始开发的第一个参数statementid）。mapper.java里面的方法入参和出参对应原始dao开发的第二个参数</em></p>
<h2 id="mapper代理开发">5.2. mapper代理开发</h2><h3 id="开发规范-1">5.2.1. 开发规范</h3><p>1.在mapper.xml中namespace等于mapper接口的地址</p>
<p>2.mapper.java接口中的方法名，和mapper.xml中的statement的id一致</p>
<p>3.mapper.java接口中的方法输入参数类型和mapper.xml中statement中的statement的parameterType指定的类型一致</p>
<p>4.mapper.java中的返回值类型和mapper.xml中的statement中的resultType指定的类型一致</p>
<p><strong>在原始开发中添加了开发规范，这些开发规范的作用：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//第一个参数：映射文件中的statement的id，等于=namespace+&quot;.&quot;+statement的id</span><br><br><span class="hljs-comment">//第二个参数：指定和映射文件中所匹配的parameterType类型的参数这里有缺陷，第二个参数是泛型</span><br><br>User user = sqlSession.selectOne(statement,parameter);<br></code></pre></td></tr></table></figure>

<p>第一条和第二条开发规范优化了SqlSession的第一个参数，系统可以自动拼接，不需要我们去传入了</p>
<p>第三条和第四条开发规范优化了SqlSession的第二个参数，可以判断他的parameterType和resultType，而不是原始开发中的泛型</p>
<h1 id="mybatis的配置文件SqlMapConfig-xml">6. mybatis的配置文件SqlMapConfig.xml</h1><p>mybatis的全局配置文件SqlMapConifig.xml，配置内容如下：</p>
<p>properties（属性)、setting（全局配置参数）、typeAliases（类型别名）、typeHandlers（类型处理器）、objectFactory（对象工厂）、plugins（插件）、environments（环境集合属性对象）（environment（环境子属性对象（transactionManager（事务管理）、dataSource（数据源））））、mappers（映射器）</p>
<h2 id="properties">6.1. properties</h2><p><strong>需求：</strong></p>
<p>将数据库连接的参数单独配置在db.properties中，只需要在SqlMapConfig.xml中加载db.properties的属性值（添加了一个配置文件），这样做的话，在SqlMapConfig.xml中就不需要对数据库的连接参数进行硬编码。</p>
<p>将数据库连接参数只配置在db.properties中的原因：方便对参数的统一管理，其他的xml可以引用改db.properties</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--SqlMapConfig.xml加载属性文件（db.properties）--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span> = <span class="hljs-string">&quot;db.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--配置数据库连接池--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span>&gt;</span><br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span> = <span class="hljs-string">&quot;$&#123;文件中的属性名称&#125;&quot;</span> /&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>properties特性：</strong></p>
<p>mybatis将按照下面的顺序来加载属性：</p>
<p>1.在properties元素体内定义属性首先被读取</p>
<p>2.然后会读取properties元素中resource或url加载的属性，他会覆盖已读取的同名属性</p>
<p>3.最后读取parameterType传递的属性，他会覆盖已读取的同名属性</p>
<p>因此，通过parameterType传递的属性具有最高优先级，resource或url加载的属性次之，最低优先级是properties元素体内定义的属性</p>
<p>建议：不要再properties元素体内添加任何属性值，只将属性值定义在properties文件中，在properties文件中定义属性名要有一定的特殊性，如xxx.xxx</p>
<h2 id="settings全局参数配置">6.2. settings全局参数配置</h2><p>mybatis运行时可以调整一些运行参数</p>
<p>比如：开启二级缓存，开启延迟加载</p>
<p><img src="/images/1565343104480.png" srcset="/gzguo/img/loading.gif" lazyload></p>
<p>这些参数会影响mybatis的运行行为，如果操作不当，可能会导致运行出现问题</p>
<h2 id="typeAliases（别名）">6.3. typeAliases（别名）</h2><p><strong>需求：</strong></p>
<p>在mapper.xml中，定义很多的statement，statement需要parameterType指定输入参数类型、需要resultType指定输出结果的映射类型</p>
<p>如果在指定类型的时候输入类型全路径，不方便进行开发，可以针对parameterType或ResultType指定的类型定义一些别名，在mapper.xml中通过别名定义，方便开发</p>
<p>mybatis有一些自己默认的别名，但是对于pojo需要自己定义别名</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br><br>​			//单个别名的定义<br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;全路径名（pojo类的路径）&quot;</span> <span class="hljs-attr">alias</span> = <span class="hljs-string">&quot;别名&quot;</span> /&gt;</span><br><br>​			//批量别名的定义<br><br>​			指定包名，mybatis自动扫描包中的po类，别名就是类名（首字母大小写都可以）<br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;包名&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="typeHandlers（类型处理器）">6.4. typeHandlers（类型处理器）</h2><p>mybatis中通过typeHandlers完成jdbc类型和java类型的转换</p>
<p>通常情况下，mybatis提供的处理器满足日常需要，不需要自定义</p>
<h2 id="mappers（映射配置）">6.5. mappers（映射配置）</h2><p>通过resource加载单个文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">maper</span> <span class="hljs-attr">class</span>/<span class="hljs-attr">resource</span>/<span class="hljs-attr">url</span>/ /&gt;</span><br><br><span class="hljs-comment">&lt;!--通过mapper接口加载映射文件，需要将mapper接口的类名和mapper.xml映射文件的名称保持一致，且在一个目录，上边规范的前提是使用mapper代理的方法--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">maper</span> <span class="hljs-attr">class</span> /&gt;</span>指定的不是映射文件，指定的是class<br><br>//批量加载mapper,指定mapper接口的包名，mybatis自动扫描包下的所有接口进行加载。这个遵循上面的规范<br><br><span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="输入映射">6.5.1. 输入映射</h3><p>通过parameterType指定输入参数类型，类型可以实简单类型、hashmap、pojo的包装类型</p>
<p><strong>传递pojo的包装对象</strong>：</p>
<p>需求：完成用户信息的综合查询，需要传入查询条件很复杂（可能包含用户信息、其他信息，比如商品、订单的）</p>
<p>针对上面的需求建议使用自定义的pojo，自定义查询条件</p>
<h3 id="输出映射">6.5.2. 输出映射</h3><p><strong>resultType</strong>:</p>
<p>使用resultType进行输出映射，只有查询出来的列名和pojo的属性名一致，该列才可以映射成功。如果查询出来的列名和pojo中的属性名全部不一致，没有创建pojo对象。只要查询出来的列名和pojo中的属性有一个一致，就会创建一个pojo对象</p>
<p><strong>输出简单类型</strong>：用户信息的综合查询的列表总数，通过查询总数和上边用户综合查询列表才可以实现分页</p>
<p>小节：只有查询出来的只有一行且有一列才可以使用输出简单类型</p>
<p>输出pojo对象和pojo列表：不管输出的是pojo对象还是列表，在mapper.xml中resultType中指定的类型是一样的，但是在mapper.java中的返回值类型不一样（对象、集合），然后自动生成的mapper代理对象中是根据mapper方法的返回值类型确定是调用selectOne还是selectList</p>
<p><strong>resultMap</strong>：</p>
<p>mybatis中使用resultMap完成高级输出结果映射</p>
<p>使用方法：</p>
<p>如果查询出来的列名和pojo的属性名不一致，通过定义一个resultMap对列名和pojo属性名之间做一个映射关系</p>
<p>1.定义resultMap</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">//id是resultMAp的唯一标识<br><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span> = <span class="hljs-string">&quot;&quot;</span>&gt;</span><br><br>​			//id表示查询结果的唯一标识 ，column sql语句中查询的列名，property：pojo中的属性名<br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span> = <span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">property</span> = <span class="hljs-string">&quot;&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>resultMap：给定义的resultMap的id，如果这个resultMap在其他的mapper文档中，前边需要加namespace    </p>
<p>2.使用resultMap作为statement的输出映射类型</p>
<p>将下边的sql用UserCostom完成映射</p>
<p>userCustom类中的属性和上边的查询列名不一致</p>
<p><strong>小节</strong>：</p>
<p>使用resultType进行输出映射，只有查询出来的列名和pojo中的属性名一致，该列才可以映射成功，如果查询出来的列名和pojo的属性名不一致，通过定义一个resultMap对列名和pojo属性名之间作一个映射关系</p>
<h3 id="动态sql">6.5.3. 动态sql</h3><h4 id="什么是动态sql">6.5.3.1. 什么是动态sql</h4><p>mybatis核心：对sql语句进行灵活的操作，通过表达式，对sql进行灵活判断，组装</p>
<p><strong>需求</strong>：</p>
<p>用户信息的综合查询列表和用户信息查询列表的总数 这两个statement的定义使用动态sql。对查询条件进行判断，查询条件不为空，我们才会对查询语句进行拼接</p>
<h5 id="if">6.5.3.1.1. if</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml">//可以去掉查询条件中的第一个and<br><br><span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><br>//判断条件<br><br><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span> = <span class="hljs-string">&quot;条件&quot;</span>&gt;</span>sql语句<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="foreach">6.5.3.2. foreach</h4><p>向sql传递数组或list，mybatis使用foreach解析</p>
<p>在用户查询列表和查询总数的statement中添加多个id输入查询</p>
<p>在输入参数类型中添加list<integer> ids传入多个id</integer></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml">//使用foreach遍历传入的ids<br><br>//collections：指定输入对象中集合属性，item：每次遍历生成对象中的属性名，open：开始遍历时拼接的串，close：结束遍历时拼接串,separator:遍历的两个对象中间需要拼接的串<br><br><span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collections</span> = <span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">item</span> = <span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">open</span> = <span class="hljs-string">&quot;AND(&quot;</span> <span class="hljs-attr">close</span> = <span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">separator</span> = <span class="hljs-string">&quot;&quot;</span>&gt;</span>id = #&#123;这里填的时item里面填的东西&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="sql片段">6.5.3.3. sql片段</h4><p><strong>需求</strong>:</p>
<p>将上边实现的sql判断代码抽取出来，组成一个sql片段。其他的statement中就可以来引用这个sql片段</p>
<p>在mapper.xml中定义的statement的引用sql片段</p>
<p>1.定义sql</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml">//sql片段的唯一标识,一般我们定义sql片段是基于单表来定义的，这样的话可重用性高。在sql片段中不要包括where<br><br><span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span> = <span class="hljs-string">&quot;&quot;</span>&gt;</span><br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span> = <span class="hljs-string">&quot;条件&quot;</span>&gt;</span>sql语句<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>2.引用sql</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">//引用sql片段的id，如果refid指定的id不再本mapper文件中，需要在前面加namespace<br><br><span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br><br>​			<span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span> = <span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><br>​			//在这里还要引用其他的sql片段，所以sql片段不能加where<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br></code></pre></td></tr></table></figure>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/gzguo/categories/mybatis/">mybatis</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/gzguo/tags/mybatis/">mybatis</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/gzguo/2019/08/16/mysql/1.2mysql%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">1.2mysql的查询操作</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/gzguo/2019/08/14/mybatis/1.2mybatis%E4%B8%8Espring%E6%95%B4%E5%90%88/">
                        <span class="hidden-mobile">2.1mybatis与spring整合</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"gc226JcELJOJ7J0n4C9IDFd1-gzGzoHsz","appKey":"Ix9equHpEbmzuf2eGJmCgvaB","placeholder":"说点什么","path":"window.location.pathname","avatar":"retro","meta":["nick","mail","link"],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false,"requiredFields":[]},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud 统计PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            总访问量 
            <span id="leancloud-site-pv"></span>
             次
          </span>
      
      
        <!-- LeanCloud 统计UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            总访客数 
            <span id="leancloud-site-uv"></span>
             人
          </span>
      

    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/gzguo/js/events.js" ></script>
<script  src="/gzguo/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/gzguo/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>






  <script defer src="/gzguo/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/gzguo/js/boot.js" ></script>


</body>
</html>
